# Water Treatment Monitor

## State Model

Each state sets the switches and valves to a specific configuration.

Timers and button presses supply the events that drive the system.

![state](./water_state.png)

### Waiting

Zero water flow and purge valve open to provide low pressure. A membrane rinse cycle is performed every **RINSE_PERIOD** minutes

Pressing the play button in this state initiates the start-up cycle

### Priming

Flows unpressurised water for **PRIME_TIME** minutes when a **PRIMED** event is generated.

### Rinsing

Flows pressurised water through the membranes with the purge valve open for **RINSE_TIME** minutes when a **RINSED** event is generated.

### External events

touch_play & touch_pause are generated by the touchscreen.

### Internal events

* RINSE_NEEDED
* PRIMED
* RINSED
* PAUSE_BTN
* PLAY_BTN
* MAX_RUN

RINSING for nn:nn:nn
